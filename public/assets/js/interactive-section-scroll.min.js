(function(e,t){"use strict";e=e||{};var o=function(e,t){return this.initialize(e)};o.defaults={targetClass:".section-scroll",dotsNav:!0},o.prototype={initialize:function(e,t){return e.data("__sectionScroll")?this:(this.$el=e,this.setData().setOptions(t).build().events(),this)},setData:function(){return this.$el.data("__sectionScroll",this),this},setOptions:function(e){return this.options=t.extend(!0,{},o.defaults,e,{wrapper:this.$el}),this},getEventsPage:function(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,!("ontouchstart"in window||navigator.msMaxTouchPoints)||void 0!==e.pointerType&&"mouse"==e.pointerType||void 0===e.touches||(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t},build:function(){var e=this,o=e.$el.get(0);e.$header=t("#header"),t("html").addClass("overflow-hidden"),t(".section-scroll").length&&t("footer").addClass("section-scroll"),e.updateSectionsHeight(),t(".section-scroll").wrap('<div class="section-wrapper"></div>'),setTimeout(function(){t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())})},300),t(".section-wrapper").first().addClass("active");var n,i,s=!1,r=!1,a=0,c=0;"ontouchstart"in window||navigator.msMaxTouchPoints?(o.addEventListener("touchstart",function(t){a=e.getEventsPage(t).y}),i="onwheel"in document?"wheel touchmove":void 0!==document.onmousewheel?"mousewheel touchmove":"DOMMouseScroll touchmove"):(i="onwheel"in document?"wheel pointermove":void 0!==document.onmousewheel?"mousewheel pointermove":"DOMMouseScroll pointermove",o.addEventListener("pointerdown",function(t){void 0!==t.pointerType&&"mouse"==t.pointerType||(a=e.getEventsPage(t).y)}));var l=function(o){if(!(t(o.srcElement).closest(".menu").length||t(o.srcElement).closest(".mobile-menu").length||t(o.srcElement).closest(".live-search-list").length)&&"mouse"!=o.pointerType){var i=null,l="";if(o.type&&("touchmove"==o.type||o.pointerType&&"mouse"!=o.pointerType)){if(c=e.getEventsPage(o).y,a==c)return;a>c?l="up":c>a&&(l="down")}else i=void 0==o.wheelDelta?o.deltaY>0:o.wheelDelta<0;var u,d=t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll"),h=e.getNextSection(i,l);if(u=e.getCurrentIndex()==t(".section-wrapper").length-1?t(document).height():h.offset().top,l&&(n&&clearTimeout(n),n=setTimeout(function(){t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").hasClass("section-scroll-scrollable")?t("html").removeClass("overflow-hidden"):t("html").addClass("overflow-hidden")},1200)),!d.hasClass("section-scroll-scrollable")||s||r){if(!(l&&Math.abs(a-c)<=window.innerHeight/100*2||s||r)){if(i||"up"==l){if(e.getCurrentIndex()==t(".section-wrapper").length-1)return;e.changeSectionActiveState(h),setTimeout(function(){e.moveTo(h.offset().top)},150)}else{if(0==e.getCurrentIndex())return;e.changeSectionActiveState(h),h.height()>window.innerHeight?e.moveTo(d.offset().top-window.innerHeight):setTimeout(function(){e.moveTo(h.offset().top)},150)}e.changeDotsActiveState(),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),h.css({position:"relative",opacity:1,"z-index":1,transform:"translate3d(0,0,0) scale(1)"}),d.css({position:"fixed",width:"100%",top:0,left:0,opacity:0,"z-index":0,transform:"translate3d(0,0,-10px) scale(0.7)",transition:"ease transform 600ms, ease opacity 600ms"});var p=parseInt(d.css("marginLeft"),10)+parseInt(d.css("marginRight"),10);p<0&&d.css("width","calc(100% + "+-1*p+"px)"),setTimeout(function(){d.css({position:"relative",opacity:1,transform:"translate3d(0,0,-10px) scale(1)"}),e.$header.css({opacity:1}),e.$header.trigger("molla_section_scroll_scrolled",[e.getCurrentIndex()]),setTimeout(function(){s=!1},500)},1e3),s=!0}}else{if(i||"up"==l){if(h.length&&t(window).scrollTop()+window.innerHeight>=u){if(s=!0,setTimeout(function(){setTimeout(function(){s=!1},500)},1e3),e.getCurrentIndex()==t(".section-wrapper").length-1)return!1;e.moveTo(d.offset().top+d.outerHeight()),e.changeSectionActiveState(h),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!l)for(f=1;f<100;f++)if(t("body, html").scrollTop(t(window).scrollTop()+1),t(window).scrollTop()+window.innerHeight>=u){r=!0,setTimeout(function(){r=!1},500);break}}else{if(t(window).scrollTop()<=d.offset().top){if(s=!0,setTimeout(function(){setTimeout(function(){s=!1},500)},1e3),0==e.getCurrentIndex())return!1;e.moveTo(d.offset().top-window.innerHeight),e.changeSectionActiveState(h),e.$header.css({opacity:0,transition:"ease opacity 500ms"})}if(!l)for(var f=1;f<100;f++)if(t("body, html").scrollTop(t(window).scrollTop()-1),t(window).scrollTop()<=d.offset().top){r=!0,setTimeout(function(){r=!1},500);break}}e.changeDotsActiveState()}}};return i.split(" ").forEach(function(e){o.addEventListener(e,l)}),this.options.dotsNav&&e.dotsNavigation(),setTimeout(function(){if(t(window.location.hash).get(0))e.moveTo(t(window.location.hash).parent().offset().top),e.changeSectionActiveState(t(window.location.hash)),e.changeDotsActiveState(),e.updateHash(!0);else{var o=window.location.hash,n=o.replace("#","");o||(n=1),e.moveTo(t(".section-wrapper").eq(n-1).offset().top),e.changeSectionActiveState(t(".section-wrapper").eq(n-1).find(".section-scroll")),e.changeDotsActiveState(),e.updateHash(!0)}t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").hasClass("section-scroll-scrollable")&&t("html").removeClass("overflow-hidden"),t(window).trigger("section.scroll.ready"),e.$header.trigger("molla_section_scroll_scrolled",[e.getCurrentIndex()])},500),this},updateSectionsHeight:function(){return t(".section-scroll").each(function(){t(this).css("height",""),t(this).outerHeight()<window.innerHeight+3?(t(this).removeClass("section-scroll-scrollable"),t(this).css({height:"100vh"})):t(this).addClass("section-scroll-scrollable")}),setTimeout(function(){t(".section-wrapper").each(function(){t(this).height(t(this).find(".section-scroll").outerHeight())})},100),this},updateHash:function(e){if(window.location.hash){if(!e){var t=this.getCurrentIndex()+1;window.location.hash=t}}else window.location.hash=1;return this},getCurrentIndex:function(){var e=0;return t(".section-wrapper").each(function(o){if(t(this).hasClass("active"))return e=o}),e},moveTo:function(e,o){var n=this;return t("body, html").animate({scrollTop:e},1e3,"easeOutQuint"),setTimeout(function(){n.updateHash()},500),this},getNextSection:function(e,o){return e||"up"==o?t(".section-wrapper").eq(this.getCurrentIndex()+1).children().eq(0):t(".section-wrapper").eq(this.getCurrentIndex()-1).children().eq(0)},changeSectionActiveState:function(e){return t(".section-wrapper").removeClass("active"),e.parent().addClass("active"),this},changeDotsActiveState:function(){return t(".section-scroll-nav > ul > li").removeClass("active"),t(".section-scroll-nav > ul > li").eq(this.getCurrentIndex()).addClass("active"),this},dotsNavigation:function(){for(var e=this,o=t('<div class="section-scroll-nav"><ul class="list list-unstyled"></ul></div>'),n=e.getCurrentIndex(),i=0;i<t(".section-scroll").length;i++){var s=t(".section-wrapper").eq(i).find(".section-scroll"),r=s.data("section-tooltip");r||(r="Section "+s.data("id")),o.find("> ul").append("<li"+(n==i?' class="active"':"")+'><a href="#'+i+'" data-nav-id="'+i+'"><span>'+r+"</span></a></li>")}return t(".page-wrapper").append(o),o.find("a[data-nav-id]").on("click touchstart",function(o){o.preventDefault();var n=t(this);t(".section-scroll").css({opacity:0,transition:"ease opacity 300ms"}),e.$header.css({opacity:0,transition:"ease opacity 500ms"}),setTimeout(function(){e.moveTo(t(".section-wrapper").eq(n.data("nav-id")).offset().top),t(".section-wrapper").removeClass("active"),t(".section-wrapper").eq(n.data("nav-id")).addClass("active"),t(".section-wrapper").eq(e.getCurrentIndex()).find(".section-scroll").css({opacity:1}),setTimeout(function(){t(".section-scroll").css({opacity:1}),e.$header.css({opacity:1}),e.$header.trigger("molla_section_scroll_scrolled",[e.getCurrentIndex()])},500),e.changeDotsActiveState()},500)}),this},events:function(){var e=this;return t(window).on("section.scroll.ready",function(){t(window).scrollTop(0)}),t(document).ready(function(){t(window).smartresize(function(){e.updateSectionsHeight()})}),this}},t.extend(e,{PluginSectionScroll:o}),t.fn.themePluginSectionScroll=function(){return this.map(function(){var e=t(this);return e.data("__sectionScroll")?e.data("__sectionScroll"):new o(e)})}}).apply(this,[window.theme,jQuery]),jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,o,n,i){return jQuery.easing[jQuery.easing.def](e,t,o,n,i)},easeOutQuad:function(e,t,o,n,i){return-n*(t/=i)*(t-2)+o},easeInOutQuart:function(e,t,o,n,i){return(t/=i/2)<1?n/2*t*t*t*t+o:-n/2*((t-=2)*t*t*t-2)+o},easeOutQuint:function(e,t,o,n,i){return n*((t=t/i-1)*t*t*t*t+1)+o}});